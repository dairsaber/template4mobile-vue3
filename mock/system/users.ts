import { MockMethod } from 'vite-plugin-mock'
import { requestParams, resultSuccess, pagination } from '../_util'

const rows = [
  {
    searchValue: null,
    createBy: 'admin',
    createTime: '2021-08-16 01:37:14',
    updateBy: null,
    updateTime: null,
    remark: '管理员',
    params: {},
    userId: 1,
    deptId: 103,
    userName: 'admin',
    nickName: '管理员',
    email: 'ry@163.com',
    phonenumber: '15888888888',
    sex: '1',
    avatar: '',
    salt: null,
    status: '0',
    delFlag: '0',
    loginIp: '127.0.0.1',
    loginDate: '2021-08-27T10:27:30.000+0800',
    dept: {
      searchValue: null,
      createBy: null,
      createTime: null,
      updateBy: null,
      updateTime: null,
      remark: null,
      params: {},
      deptId: 103,
      parentId: null,
      ancestors: null,
      deptName: '研发部门',
      orderNum: null,
      leader: '若依',
      phone: null,
      email: null,
      status: null,
      delFlag: null,
      parentName: null,
      children: [],
    },
    roles: [],
    roleIds: null,
    postIds: null,
    roleId: null,
    admin: true,
  },
  {
    searchValue: null,
    createBy: 'admin',
    createTime: '2021-08-16 01:37:14',
    updateBy: null,
    updateTime: null,
    remark: '测试员',
    params: {},
    userId: 2,
    deptId: 105,
    userName: 'ry',
    nickName: 'common',
    email: 'ry@qq.com',
    phonenumber: '15666666666',
    sex: '1',
    avatar: '',
    salt: null,
    status: '0',
    delFlag: '0',
    loginIp: '127.0.0.1',
    loginDate: '2021-08-16T01:37:14.000+0800',
    dept: {
      searchValue: null,
      createBy: null,
      createTime: null,
      updateBy: null,
      updateTime: null,
      remark: null,
      params: {},
      deptId: 105,
      parentId: null,
      ancestors: null,
      deptName: '测试部门',
      orderNum: null,
      leader: '若依',
      phone: null,
      email: null,
      status: null,
      delFlag: null,
      parentName: null,
      children: [],
    },
    roles: [],
    roleIds: null,
    postIds: null,
    roleId: null,
    admin: false,
  },
]

export default [
  {
    url: '/dev-api/system/user/list',
    timeout: 500,
    method: 'get',
    response: ({ query }: requestParams) => {
      const { pageNum, pageSize, searchValue } = query
      let filterList = rows
      if (searchValue) {
        filterList = filterList.filter((item) => new RegExp(searchValue).test(item.nickName))
      }
      const list = pagination(pageNum, pageSize, filterList)
      return resultSuccess({
        rows: list,
      })
    },
  },
] as MockMethod[]
